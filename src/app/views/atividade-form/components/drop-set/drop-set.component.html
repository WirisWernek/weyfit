<div class="d-flex w-100 align-items-center justify-content-end mb-3">
	<button (click)="addDropSet()" class="btn btn-primary d-flex gap-2">
		<i class="bi bi-plus-circle"></i>
		<span>Adicionar</span>
	</button>
</div>
<ng-container>
	@for (dropSetForm of dropSets; track dropSetForm; let i = $index) {
	<div ngbAccordion>
		<div ngbAccordionItem>
			<h2 ngbAccordionHeader>
				<button ngbAccordionButton>
					{{ dropSetForm.get('nome')?.value !== '' ? dropSetForm.get('nome')?.value : 'Drop Set ' + (i + 1) }}
				</button>
			</h2>
			<div ngbAccordionCollapse>
				<div ngbAccordionBody>
					<form class="lesson-form-row customized" [formGroup]="dropSetForm">
						<div class="mb-3">
							<label for="inputNome" class="form-label">Nome</label>
							<input type="text" class="form-control" id="inputNome" placeholder="Rosca Direta" formControlName="nome" />
						</div>
						<div class="mb-3">
							<label for="inputQuantidadeRepeticoesIdeal" class="form-label">Nº de Repetições Ideal</label>
							<input
								type="text"
								class="form-control"
								id="inputQuantidadeRepeticoesIdeal"
								placeholder="3"
								formControlName="qtdRepeticoesIdeal"
							/>
						</div>
						@for (setForm of sets(i); track setForm; let indexSet = $index) { @if (setForm) {
						<hr />
						<form class="lesson-form-row customized" [formGroup]="setForm">
							<div class="d-flex w-100 align-items-center justify-content-between">
								<h5>Repetição {{ indexSet + 1 }}</h5>
							</div>
							<div class="d-flex w-100 gap-2 align-items-center justify-content-between">
								<div class="mb-3 w-50">
									<label for="inputNumeroRepeticoes" class="form-label">Nº de Repetições</label>
									<input
										type="text"
										class="form-control"
										id="inputNumeroRepeticoes"
										placeholder="Repetições"
										formControlName="qtdRepeticoes"
									/>
								</div>
								<div class="mb-3 w-50">
									<label for="inputPeso" class="form-label">Peso</label>
									<input type="number" class="form-control" id="inputPeso" placeholder="peso" formControlName="peso" />
								</div>
							</div>
							<button (click)="deleteSet(i, indexSet)" class="btn btn-danger w-100 mb-3 d-flex gap-2 justify-content-center">
								<i class="bi bi-trash3"></i>
								<span>Excluir Repetição</span>
							</button>
							<button (click)="duplicarSet(i, indexSet)" class="btn btn-secondary w-100 mb-3 d-flex gap-2 justify-content-center">
								<i class="bi bi-clipboard-check"></i>
								<span>Duplicar Repetição</span>
							</button>
						</form>
						} }
						<div class="d-flex w-100 align-items-center justify-content-between">
							<button (click)="addSet(i)" class="btn btn-primary d-flex gap-2 justify-content-center">
								<i class="bi bi-plus-circle"></i>
								<span>Repetição</span>
							</button>
							<button (click)="deleteDropSet(i)" class="btn btn-danger d-flex gap-2 justify-content-center">
								<i class="bi bi-trash3"></i>
								<span>Excluir</span>
							</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>

	}
</ng-container>
